#version 330 core

uniform float time;
in vec3 color;
in vec4 gl_FragCoord;
out vec4 FragColor;
uniform float zNear;
uniform float zFar;

void main()
{
    float z_buffer = gl_FragCoord.z;
    float z_normalized = 2.0 * z_buffer - 1.0;
    float z_eyespace = 2*zFar*zNear / (zFar + zNear - (zFar - zNear)*(2*z_buffer -1));

    z_eyespace /= 100000;

    FragColor = vec4(z_eyespace, z_eyespace, z_buffer*1000, 1.0);
}